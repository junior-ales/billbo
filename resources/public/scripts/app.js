!function(){"use strict";var e="undefined"==typeof window?global:window;if("function"!=typeof e.require){var t={},n={},r={}.hasOwnProperty,i={},a=function(e,t){var n=0;t&&(t.indexOf(!1)&&(n="components/".length),t.indexOf("/",n)>0&&(t=t.substring(n,t.indexOf("/",n))));var r=i[e+"/index.js"]||i[t+"/deps/"+e+"/index.js"];return r?"components/"+r.substring(0,r.length-".js".length):e},o=function(){var e=/^\.\.?(\/|$)/;return function(t,n){var r,i,a=[];r=(e.test(n)?t+"/"+n:n).split("/");for(var o=0,s=r.length;s>o;o++)i=r[o],".."===i?a.pop():"."!==i&&""!==i&&a.push(i);return a.join("/")}}(),s=function(e){return e.split("/").slice(0,-1).join("/")},l=function(t){return function(n){var r=o(s(t),n);return e.require(r,t)}},c=function(e,t){var r={id:e,exports:{}};return n[e]=r,t(r.exports,l(e),r),r.exports},u=function(e,i){var s=o(e,".");if(null==i&&(i="/"),s=a(e,i),r.call(n,s))return n[s].exports;if(r.call(t,s))return c(s,t[s]);var l=o(s,"./index");if(r.call(n,l))return n[l].exports;if(r.call(t,l))return c(l,t[l]);throw new Error('Cannot find module "'+e+'" from "'+i+'"')};u.alias=function(e,t){i[t]=e},u.register=u.define=function(e,n){if("object"==typeof e)for(var i in e)r.call(e,i)&&(t[i]=e[i]);else t[e]=n},u.list=function(){var e=[];for(var n in t)r.call(t,n)&&e.push(n);return e},u.brunch=!0,e.require=u}}(),require.register("config/toggles",function(e,t,n){n.exports={donateButton:!1}}),require.register("model/request",function(e,t,n){"use strict";var r=function(e,t){var n=new XMLHttpRequest;n.open("GET",encodeURI(e)),n.onload=function(){n.status<400&&t.success(n.responseText)},n.send()},i=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length>0&&(t+="&"),t+=encodeURI(n+"="+e[n]));return t},a=function(e,t){var n=new XMLHttpRequest;n.open("POST",encodeURI(e),!0),n.setRequestHeader("Accept","application/json, text/javascript, */*; q=0.01"),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.onload=function(){n.status<400&&t.success()},n.send(i(t.data))};n.exports={get:r,post:a}}),require.register("model/reservation",function(e,t,n){"use strict";function r(e,t,n){return this instanceof r?(Object.defineProperty(this,"billId",{value:e,enumerable:!0,writable:!1}),Object.defineProperty(this,"donatorName",{value:t,enumerable:!0,writable:!1}),Object.defineProperty(this,"donatorEmail",{value:n,enumerable:!0,writable:!1}),void Object.defineProperty(this,"isValid",{value:function(){return!!this.billId&&!!this.donatorEmail},writable:!1})):new r(e,t,n)}n.exports=r}),require.register("views/components/bill",function(e,t,n){"use strict";var r=t("config/toggles"),i=t("./reserveConfirmation"),a=React.createClass({displayName:"Bill",render:function(){return React.createElement("div",{className:"th"},React.createElement("img",{src:this.props.data["picture-link"],alt:"Conta"}),React.createElement("h2",null,this.props.data["issued-by"]),React.createElement("p",null,"R$ ",this.props.data["total-amount"]),React.createElement("p",null,"Vencimento: ",this.props.data["due-date"]),r.donateButton?React.createElement(i,{billId:this.props.data["bill-id"]}):null)}});n.exports=a}),require.register("views/components/billList",function(e,t,n){"use strict";var r=t("./bill"),i=t("model/request"),a=React.createClass({displayName:"BillList",getInitialState:function(){return{bills:[]}},componentDidMount:function(){var e=this;i.get(e.props.source,{success:function(t){e.isMounted()&&e.setState({bills:JSON.parse(t)})}})},render:function(){var e=function(e){return"open"===e["current-status"]};return React.createElement("ul",{className:"small-block-grid-2 medium-block-grid-3"},this.state.bills.filter(e).map(function(e){return React.createElement("li",{key:"billId"+e["bill-id"]},React.createElement(r,{data:e}))}))}});n.exports=a}),require.register("views/components/reserveConfirmation",function(e,t,n){"use strict";var r=t("model/request"),i=t("model/reservation"),a=React.createClass({displayName:"ReserveConfirmation",propTypes:{billId:React.PropTypes.string.isRequired},getInitialState:function(){return{modalVisible:!1}},handleDonateClick:function(){this.setState({modalVisible:!0})},handleCloseModal:function(e){e.preventDefault(),this.setState({modalVisible:!1})},handleConfirmDonation:function(e){e.preventDefault();var t=this.refs.donatorName,n=this.refs.donatorEmail,a=new i(this.props.billId,t.value,n.value);a.isValid()&&r.post("/reservation/new",{data:a,success:function(){t.value="",n.value="",console.log("Reserva realizada com sucesso")}}),this.setState({modalVisible:!1})},render:function(){var e="reserve-confirmation__modal";return this.state.modalVisible&&(e+="--active"),React.createElement("article",{className:"reserve-confirmation"},React.createElement("button",{onClick:this.handleDonateClick},"Doar"),React.createElement("div",{className:e},React.createElement("form",{className:"reserve-confirmation__modal__content"},React.createElement("h2",null,"Doar"),React.createElement("label",null,"Nome:",React.createElement("input",{type:"text",ref:"donatorName",placeholder:"(Opcional)"})),React.createElement("label",null,"Email:",React.createElement("input",{type:"email",ref:"donatorEmail"})),React.createElement("button",{onClick:this.handleConfirmDonation},"confirmar"),React.createElement("button",{className:"secondary",onClick:this.handleCloseModal},"cancelar"))))}});n.exports=a}),require.register("views/home",function(e,t,n){"use strict";var r=t("./components/billList"),i={init:function(){ReactDOM.render(React.createElement(r,{source:"/bills"}),document.getElementById("bill-list"))}};n.exports=i});